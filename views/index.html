<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movies</title>
    <link rel="stylesheet" type="text/css" href="/css/style.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
</head>

<script>
    let categories = [];
    $(document).ready(()=>{
        loadCategoryData()
        loadMovieData();
    });
    function loadMovieData(){
        $.ajax('/api/movies',{
            "type":"get",
        }).done((res)=>{
           categories = getUniqueCategorieName(res);
           for(let category of categories){
                let dataRow = $('<div class="dataRowMovie"></div>')
                let p = $('<p class="movieCategory">'+ category[0].toUpperCase()+category.slice(1)+'</p>');
                dataRow.append(p);
                let container = $('<div class="grid-container" id="'+category+'"></div>');
                dataRow.append(container);
                $('.movie-list').append(dataRow);
           }
           for(let movie of res){
                let container =$('#'+movie.cate_name);
                let card = $('<div class="cards"></div>');
                let img =    $('<img src="/Images/'+movie.movie_cover+'" />');
                let time =  $('<div class="timeShow"> <span> Last episode'+ movie.movie_release_date+'</span></div>');
                let name = $('<div><strong>'+movie.movie_name+'</strong></div>');
                let btn =$('<div class="btnDownload"><span>MORE INFO</span></div>');
                card.append(img);
                card.append(time);
                card.append(name);
                card.append(btn);
                container.append(card); 
            }
        })
        .fail(()=>{
            console.log("fail");
        })
    }
    function loadCategoryData(){
        $.ajax('/api/categories',{
            "type":"get",
        }).done((res)=>{
            categories=res;
            let u = $("<ul></ul>")
            for(let category of res){
                u.append('<li><a href="#">'+category.cate_name+'</a></li>')
            }
            u.append('<li><a href="#">'+"Contact Us"+'</a></li>')
            $(".nav").append(u);
        })
        .fail(()=>{
            console.log("fail");
        })
    }
    
    function getUniqueCategorieName(movies){
        let names = movies.map(m=>m.cate_name);
        categories = [...new Set(names)];
        return categories;
    }

</script>

<body>

    <div class="container">

        <div class="myHeader">
            <div class="logo"><img src="img/logo12.png" width="155px"></div>
            <div class="nav">
                
            </div>
            <div class="boxSearch">
                <img src="img/search.png" width="30px" />
            </div>

        </div>

        <div class="myBody">
            <div class="myContent">
                <div class="boxLeft">
                    <img src="img/1.jpg" width="100%" height="100%" />
                </div>


                <div class="boxCenter">

                    <div style="margin: 50px; background-color: white;">
                        <h1>
                            Abbott Elementary
                        </h1>
                        <hr />
                        <p>
                            Follows a group of teachers brought together in one of the worst public schools in the
                            country,
                            simply because they love teaching.
                        </p>
                        <a href="#">
                            DOWNLOAD HERE
                        </a>
                    </div>


                </div>

                <div class="boxRight">

                    <div class="monthActive">

                        <div style="padding: 20px; ">
                            <label>New Start</label>
                            <label style="float: right;">March</label>
                            <h3>Star Trek: Picard</h3>
                        </div>

                    </div>
                    <div class="monthStart">
                        <div style="padding: 20px; ">
                            <label>New Start</label>
                            <label style="float: right;">March</label>
                            <h3>Star Trek: Picard</h3>
                        </div>

                    </div>
                    <div class="monthStart">
                        <div style="padding: 20px; ">
                            <label>New Start</label>
                            <label style="float: right;">March</label>
                            <h3>Star Trek: Picard</h3>
                        </div>
                    </div>

                </div>
            </div>


            <div class="movie-list">
            </div>
        </div>

        <div class="footer">

            <div class="flex-container">
                <div class="flex-item-left">
                    <h4>About Us</h4>
                    <p style="text-align: justify;">Lorem ipsum dolor sit, amet consectetur adipisicing elit.
                        Exercitationem voluptatum ipsa nobis laboriosam, illum vel quam. Blanditiis porro voluptatum
                        corrupti, repellat tempora ullam temporibus ex aliquid officiis officia atque aliquam.</p>

                    <h5>Tel: +123456789</h5>
                    <h5>Email: phin.phearun2013@gmail.com</h5>

                    <div>
                        <span class="boxEmail"> Enter your Email</span>
                        <span class="boxEmail" style="background-color: rgb(241 150 1);color: white;"> Send</span>
                    </div>

                </div>
                <div class="flex-item-center">
                    <h4>Developed By</h4>
                    <ul>
                        <li>Name: <strong> Phearun Phin</strong></li>
                        <li>Email: <strong>phin.phearun2013@gmail.com</strong></li>

                    </ul>

                    <h4>Latest Tweet</h4>
                    <ul>
                        <li>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Exercitationem voluptatum ipsa
                            nobis laboriosam, illum vel quam.</li>
                        <li>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Exercitationem voluptatum ipsa
                            nobis laboriosam, illum vel quam.</li>
                        <li>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Exercitationem voluptatum ipsa
                            nobis laboriosam, illum vel quam.</li>
                    </ul>


                </div>
                <div class="flex-item-right">
                    <h4>Top Movies</h4>

                    <div class="grid-movies">

                        <div class="movies1"><img src="img/m12.jpg" /></div>
                        <div class="movies2"><img src="img/m5.jpg" /></div>
                        <div class="movies3"><img src="img/m7.jpg" /></div>
                        <div class="movies4"><img src="img/m13.jpg" /></div>

                    </div>
                </div>


            </div>

            <hr />
            <div>
                <div class="nav">
                    <ul>
                        <li><a href="#">Today</a></li>
                        <li><a href="#">TV Series</a></li>
                        <li><a href="#">Trailers</a></li>
                        <li><a href="#">Series Calendar</a></li>
                        <li><a href="#">DMCA</a></li>
                        <li><a href="#">ADS Partnership </a></li>
                        <li><a href="#">Contact</a></li>
                    </ul>

                </div>
                <div class="boxSearch">
                    <img src="img/logo12.png" width="100px" />
                </div>
            </div>

        </div>


    </div>
</body>

</html>